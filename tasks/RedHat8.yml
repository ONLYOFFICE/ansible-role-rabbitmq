---
- name: Add packagecloud GPG key.
  ansible.builtin.rpm_key:
    key: "{{ rabbitmq_gpg_key }}"
    state: present

- name: Download RabbitMQ package.
  ansible.builtin.get_url:
    url: "{{ rabbitmq_el8_rpm_url }}"
    dest: "/tmp/{{ rabbitmq_el8_rpm }}"

- name: Ensure RabbitMQ is installed.
  ansible.builtin.dnf:
    name: "/tmp/{{ rabbitmq_el8_rpm }}"
    state: "present"
    disable_gpg_check: yes
